<section id="globalvars">
  <h3>Global variables</h3>

  <p>A global variable has a name beginning with <code>$</code>.  It
  can be referred to from anywhere in a program.  Before
  initialization, a global variable has the special value
  <code>nil</code>. </p>
  <p><div class=shell>ruby&gt;<font color="#ffff00"><b> $foo</b></font><br>
  <font color="#50ffff"><b>&nbsp;&nbsp; nil</b></font><br>
  ruby&gt;<font color="#ffff00"><b> $foo = 5</b></font><br>
  <font color="#50ffff"><b>&nbsp;&nbsp; 5</b></font><br>
  ruby&gt;<font color="#ffff00"><b> $foo</b></font><br>
  <font color="#50ffff"><b>&nbsp;&nbsp; 5</b></font></div>

  <p>Global variables should be used sparingly.  They are dangerous
  because they can be written to from anywhere.  Overuse of globals
  can make isolating bugs difficult; it also tends to indicate that the
  design of a program has not been carefully thought out.  Whenever
  you do find it necessary to use a global variable, be sure to give it
  a descriptive name that is unlikely to be inadvertently used for
  something else later (calling it something like <code>$foo</code> as
  above is probably a bad idea).</p>
  <p>One nice feature of a global variable is that it can be traced; you
  can specify a procedure which is invoked whenever the value of the
  variable is changed. </p>
  <p><div class=shell>ruby&gt;<font color="#ffff00"><b> trace_var :$x, proc{puts "$x is now #{$x}"}</b></font><br>
  <font color="#50ffff"><b>&nbsp;&nbsp; nil</b></font><br>
  ruby&gt;<font color="#ffff00"><b> $x = 5</b></font><br>
  $x is now 5<br>
  <font color="#50ffff"><b>&nbsp;&nbsp; 5</b></font></div>

  <p>When a global variable has been rigged to work as a trigger to invoke
  a procedure whenever changed, we sometimes call it an <em>active
  variable</em>.  For instance, it might be useful for keeping a GUI
  display up to date.</p>
  <p>There is a collection of special variables whose names consist of a
  dollar sign (<code>$</code>) followed by a single character.  For example,
  <code>$$</code> contains the process id of the ruby interpreter, and is
  read-only.  Here are the major system variables:</p>
  <p><table border="1"><tr><td><code>$!</code> </td><td> latest error message </td></tr>
  <tr><td>
  <code>$@</code> </td><td> location of error </td></tr>
  <tr><td>
  <code>$_</code> </td><td> string last read by <code>gets</code> </td></tr>
  <tr><td>
  <code>$.</code> </td><td> line <em>number</em> last read by interpreter </td></tr>
  <tr><td>
  <code>$&amp;</code> </td><td> string last matched by regexp </td></tr>
  <tr><td>
  <code>$~</code> </td><td> the last regexp match, as an array of subexpressions </td></tr>
  <tr><td>
  <code>$</code><em>n</em> </td><td> the <em>nth</em> subexpression in the last match (same as <code>$~[</code><em>n</em><code>]</code>) </td></tr>
  <tr><td>
  <code>$=</code> </td><td> case-insensitivity flag </td></tr>
  <tr><td>
  <code>$/</code> </td><td> input record separator </td></tr>
  <tr><td>
  <code>$\</code> </td><td> output record separator </td></tr>
  <tr><td>
  <code>$0</code> </td><td> the name of the ruby script file </td></tr>
  <tr><td>
  <code>$*</code> </td><td> the command line arguments </td></tr>
  <tr><td>
  <code>$$</code> </td><td> interpreter's process ID </td></tr>
  <tr><td>
  <code>$?</code> </td><td> exit status of last executed child process</td></tr></table>
  <p>In the above, <code>$_</code> and <code>$~</code> have local scope.
  Their names suggest they should be global, but they are much more
  useful this way, and there are historical reasons for using these
  names.</p>

</section>
